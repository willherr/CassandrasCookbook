@inject NavigationManager NavigationManager

<MatCard Style="@(IsListView ? "cursor: pointer" : "")" @onclick="Navigate">
    <MatCardContent>
        <MatBody2 Class="pl-1 my-2">
            <MatHeadline6 Class="m-0">@Item.Title</MatHeadline6>
        </MatBody2>
        <MatCardMedia Wide="true" ImageUrl="@Item.ImageUrl"></MatCardMedia>
        @if (!IsListView && Item.HasAdditionalInformation)
        {
            <MatBody2 Class="pl-1 pr-1">
                @if (!string.IsNullOrEmpty(Item.Introduction))
                {
                    @Item.Introduction                    
                }
                @if (Item.Ingredients.Any())
                {
                    <MatList Class="p-0 mt-2">
                        <MatListItem>
                            <MatListItemText>
                                <MatListItemPrimaryText><b>Ingredients</b></MatListItemPrimaryText>
                                <MatListItemSecondaryText></MatListItemSecondaryText>
                            </MatListItemText>
                        </MatListItem>
                        <MatListDivider></MatListDivider>
                        @foreach (var ingredient in Item.Ingredients)
                        {
                            var primaryText = $"{ingredient.Title}: {ingredient.Amount} {ingredient.UnitOfMeasure}";
                            <MatListItem>
                                <MatListItemText>
                                        <MatListItemPrimaryText>@primaryText</MatListItemPrimaryText>
                                        <MatListItemSecondaryText>@ingredient.AdditionalNotes</MatListItemSecondaryText>
                                </MatListItemText>
                            </MatListItem>
                        }
                    </MatList>
                }
            </MatBody2>
        }
    </MatCardContent>
</MatCard>

@code {
    [Parameter]
    public RecipeItem Item { get; set; }

    [Parameter]
    public bool IsListView { get; set; }

    public void Navigate()
    {
        if (IsListView)
        {
            NavigationManager.NavigateTo($"recipe/{Item.Title}");
        }
    }
}
